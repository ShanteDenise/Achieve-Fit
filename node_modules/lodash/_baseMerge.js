var Stack = require('./_Stack'),
    assignMergeValue = require('./_assignMergeValue'),
    baseFor = require('./_baseFor'),
    baseMergeDeep = require('./_baseMergeDeep'),
    isObject = require('./isObject'),
    keysIn = require('./keysIn'),
    safeGet = require('./_safeGet');

/**
 * The base implementation of `_.merge` without support for multiple sources.
 *
 * @private
 * @param {Object***REMOVED*** object The destination object.
 * @param {Object***REMOVED*** source The source object.
 * @param {number***REMOVED*** srcIndex The index of `source`.
 * @param {Function***REMOVED*** [customizer] The function to customize merged values.
 * @param {Object***REMOVED*** [stack] Tracks traversed source values and their merged
 *  counterparts.
 */
function baseMerge(object, source, srcIndex, customizer, stack) {
  if (object === source) {
    return;
  ***REMOVED***
  baseFor(source, function(srcValue, key) {
    if (isObject(srcValue)) {
      stack || (stack = new Stack);
      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);
    ***REMOVED***
    else {
      var newValue = customizer
        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)
        : undefined;

      if (newValue === undefined) {
        newValue = srcValue;
      ***REMOVED***
      assignMergeValue(object, key, newValue);
    ***REMOVED***
  ***REMOVED***, keysIn);
***REMOVED***

module.exports = baseMerge;
